(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0470c1ef"],{"04a4":function(e,t,a){},"8f1f":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sale"},[a("div",{staticClass:"mine_top"},[a("div",{staticClass:"return",on:{click:function(t){return e.retreat()}}}),a("span",[e._v("创建卖单")])]),a("div",{staticClass:"setmenu"},[a("div",{staticClass:"currency"},[a("p",[e._v("卖出币种")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.takex,expression:"takex"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.takex=t.target.multiple?a:a[0]}}},e._l(e.takes,function(t,s){return a("option",{key:s},[e._v(e._s(t))])}),0)]),a("van-cell-group",[a("van-field",{attrs:{label:"卖出数量",placeholder:"请输入您要卖的token币数量"},model:{value:e.sale_num,callback:function(t){e.sale_num=t},expression:"sale_num"}})],1),a("div",{staticClass:"currency"},[a("p",[e._v("接受币种")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.take,expression:"take"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.take=t.target.multiple?a:a[0]}}},e._l(e.takes,function(t,s){return a("option",{key:s},[e._v(e._s(t))])}),0)]),a("van-cell-group",[a("van-field",{attrs:{label:"单价",placeholder:"请输入币的单价"},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}})],1),a("van-cell-group",[a("van-field",{attrs:{label:"接受数量",disabled:"",placeholder:e.sale_num*e.price==0?"请输入接受数量":e.sale_num*e.price}})],1),a("div",{staticClass:"currency"},[a("p",[e._v("收款地址")]),""==e.num?a("span",[e._v("\n            "+e._s(e.site)+"\n         ")]):""!==e.num?a("span",{staticClass:"add"},[""!=e.num.ali_nickname?a("p",[e._v("支付宝："+e._s(e.num.ali_nickname)+"-"+e._s(e.num.ali_account))]):e._e(),""!=e.num.we_nickname?a("p",[e._v("微信："+e._s(e.num.we_nickname)+"-"+e._s(e.num.we_account))]):e._e(),""!=e.num.idcard?a("p",[e._v("银联："+e._s(e.num.idcard))]):e._e()]):e._e()]),a("van-cell-group",[a("van-field",{attrs:{label:"手机号",disabled:"",placeholder:e.phone}})],1),a("div",{staticClass:"site"}),a("div",{staticClass:"getsite getsite2"},[a("p",{staticStyle:{"margin-bottom":"50px"}},[a("van-icon",{staticClass:"err",attrs:{name:"cross"},on:{click:function(t){return e.err_btn(2)}}}),e._v("\n               请输入支付密码\n            ")],1),a("van-cell-group",[a("van-field",{attrs:{type:"password",placeholder:"请输入您的交易密码"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),a("van-button",{staticClass:"btn",attrs:{size:"large"},on:{click:function(t){return e.Submit()}}},[e._v("确认密码")])],1)],1),a("van-button",{staticClass:"btn",attrs:{size:"large"},on:{click:function(t){return e.sale(2)}}},[e._v("确认创建")])],1)},n=[],i=a("bc3a"),l=a.n(i),o={name:"",data:function(){return{phone:localStorage.phone,currency:"支付宝",site:"请输入您要收款的地址",price:"",takex:"",take:"",takes:[],sale_num:"",showKeyboard:!0,value:"",num:""}},watch:{take:function(e,t){var a=this,s=window.globalData.config.domain+"/user/findWithdrawAddress";l.a.post(s,{cmd:"123",body:{appid:localStorage.appid,uid:localStorage.uid,token:e}}).then(function(t){var s=t.data;null===s?(a.$dialog.alert({message:"您未绑定该地址,无法选择"}),a.take="",a.num="",a.site="请输入您要收款的地址"):"CNY"===e?(a.site="",a.num=s):null!==s&&(a.num="",a.site=s)})},price:function(e,t){/^[0-9]*$/.test(e)||(this.$dialog.alert({message:"请输入正确价格"}),this.price="")},sale_num:function(e,t){/^[0-9]*$/.test(e)||(this.$dialog.alert({message:"请输入正确价格"}),this.sale_num="")}},created:function(){this.Currency()},methods:{retreat:function(){this.$router.go(-1)},Submit:function(){var e=this,t=window.globalData.config.domain+"/otc/sellPendOrder";l.a.post(t,{cmd:"201",body:{accessToken:localStorage.token,from_token:this.takex,token_amount:this.sale_num,dst_token:this.take,dst_token_amount:this.sale_num*this.price,price:this.price,phone:this.phone,paypasswd:this.value}}).then(function(t){217===t.data.code?(e.$dialog.alert({message:"密码输入错误"}),e.value=""):116===t.data.code?(e.$dialog.alert({message:"您的余额不足"}),e.value=""):104===t.data.code?(e.$dialog.alert({message:"您填写的信息有误"}),e.value=""):132===t.data.code?(e.$dialog.alert({message:"请绑定支付宝、微信或者银行卡"}),e.$router.go(-1)):133===t.data.code?(e.$dialog.alert({message:"请绑定"+e.take+"地址"}),e.$router.go(-1)):0===t.data.code?e.$router.go(-1):(e.$dialog.alert({message:"订单创建失败"}),e.$router.go(-1))})},setsite:function(e){var t=document.getElementsByClassName("site")[0],a=document.getElementsByClassName("getsite"+e)[0];t.style.display="block",a.style.display="block"},err_btn:function(e){var t=document.getElementsByClassName("site")[0],a=document.getElementsByClassName("getsite"+e)[0];t.style.display="none",a.style.display="none"},sale:function(e){""===this.takex?this.$dialog.alert({message:"请选择您要卖出的货币种类"}):""===this.sale_num?this.$dialog.alert({message:"请输入您要交易的货币数量"}):""===this.price?this.$dialog.alert({message:"请输入您出售的货币单价"}):""===this.take?this.$dialog.alert({message:"请选择您要接受的货币种类"}):"请输入您要收款的地址"==this.site?this.$dialog.alert({message:"请填写您的收款地址"}):this.takex===this.take?this.$dialog.alert({message:"不能购买、售卖相同的货币"}):this.setsite(e)},Currency:function(){var e=this,t="/blockchain/getSupportCoins";this.$http.post(t,{cmd:"",body:{}}).then(function(t){e.takes=t})}}},r=o,c=(a("96b3"),a("2877")),u=Object(c["a"])(r,s,n,!1,null,"2250cab8",null);t["default"]=u.exports},"96b3":function(e,t,a){"use strict";var s=a("04a4"),n=a.n(s);n.a}}]);
//# sourceMappingURL=chunk-0470c1ef.f16532dd.js.map