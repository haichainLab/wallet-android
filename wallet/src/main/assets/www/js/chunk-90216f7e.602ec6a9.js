(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-90216f7e"],{"1c40":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"buyer"},[a("div",{staticClass:"mine_top"},[a("div",{staticClass:"return",on:{click:function(t){return e.retreat()}}}),a("span",[e._v("创建买单")])]),a("div",{staticClass:"setmenu"},[a("div",{staticClass:"currency"},[a("p",[e._v("购买币种")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.takex,expression:"takex"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.takex=t.target.multiple?a:a[0]}}},e._l(e.takes,function(t,s){return a("option",{key:s},[e._v(e._s(t))])}),0)]),a("van-cell-group",[a("van-field",{attrs:{label:"购买数量",placeholder:"请输入您要购买token币数量"},model:{value:e.sale_num,callback:function(t){e.sale_num=t},expression:"sale_num"}})],1),a("div",{staticClass:"currency"},[a("p",[e._v("支付币种")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.take,expression:"take"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.take=t.target.multiple?a:a[0]}}},e._l(e.takes,function(t,s){return a("option",{key:s},[e._v(e._s(t))])}),0)]),a("van-cell-group",[a("van-field",{attrs:{label:"单价",placeholder:"请输入货币的单价"},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}})],1),a("van-cell-group",[a("van-field",{attrs:{label:"支付数量",disabled:"",placeholder:e.sale_num*e.price==0?"请输入支付数量":e.sale_num*e.price}})],1),a("van-cell-group",[a("van-field",{attrs:{label:"手机号",disabled:"",placeholder:e.phone}})],1),a("div",{staticClass:"site"}),a("div",{staticClass:"getsite"},[a("p",{staticStyle:{"margin-bottom":"50px"}},[a("van-icon",{staticClass:"err",attrs:{name:"cross"},on:{click:function(t){return e.err_btn()}}}),e._v("\n               请输入支付密码\n            ")],1),a("van-cell-group",[a("van-field",{attrs:{type:"password",placeholder:"请输入您的交易密码"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),a("van-button",{staticClass:"btn",attrs:{size:"large"},on:{click:function(t){return e.Submit()}}},[e._v("确认密码")])],1)],1),a("van-button",{staticClass:"btn",attrs:{size:"large"},on:{click:function(t){return e.sale()}}},[e._v("确认支付")])],1)},n=[],l=a("bc3a"),i=a.n(l),o={name:"",data:function(){return{phone:localStorage.phone,price:"",takex:"",take:"",takes:[],sale_num:"",showKeyboard:!0,value:""}},created:function(){this.Currency()},watch:{price:function(e,t){/^[0-9]*$/.test(e)||(this.$dialog.alert({message:"请输入正确价格"}),this.price="")},sale_num:function(e,t){/^[0-9]*$/.test(e)||(this.$dialog.alert({message:"请输入正确价格"}),this.sale_num="")}},methods:{retreat:function(){this.$router.go(-1)},Submit:function(){var e=this,t=window.globalData.config.domain+"/otc/buyPendOrder";i.a.post(t,{cmd:"201",body:{accessToken:localStorage.token,from_token:this.take,from_amount:this.pay,dst_token:this.takex,dst_token_amount:this.sale_num,price:this.price,phone:this.phone,paypasswd:this.value,notice:""}}).then(function(t){217===t.data.code?(e.$dialog.alert({message:"密码输入错误"}),e.value=""):116===t.data.code?(e.$dialog.alert({message:"您的余额不足"}),e.value=""):132===t.data.code?(e.$dialog.alert({message:"请绑定支付宝、微信或者银行卡"}),e.$router.go(-1)):133===t.data.code?(e.$dialog.alert({message:"请绑定"+e.take+"地址"}),e.$router.go(-1)):0===t.data.code?(e.$dialog.alert({message:"订单创建成功"}),e.$router.go(-1)):(e.$dialog.alert({message:"订单创建失败"}),e.$router.go(-1))})},setsite:function(){var e=document.getElementsByClassName("site")[0],t=document.getElementsByClassName("getsite")[0];e.style.display="block",t.style.display="block"},err_btn:function(){var e=document.getElementsByClassName("site")[0],t=document.getElementsByClassName("getsite")[0];e.style.display="none",t.style.display="none"},sale:function(){""===this.takex?this.$dialog.alert({message:"请输入您要购买的货币种类"}):""===this.sale_num||"0"==this.sale_num?this.$dialog.alert({message:"请输入您要购买的货币数量"}):""===this.take?this.$dialog.alert({message:"请选择您要支付的货币种类"}):""===this.price||"0"==this.price?this.$dialog.alert({message:"请输入您要购买的货币单价"}):this.setsite()},Currency:function(){var e=this,t="/blockchain/getSupportCoins";this.$http.post(t,{cmd:"",body:{}}).then(function(t){e.takes=t})}}},r=o,c=(a("b8cc"),a("2877")),u=Object(c["a"])(r,s,n,!1,null,"364d7d0e",null);t["default"]=u.exports},"73cc":function(e,t,a){},b8cc:function(e,t,a){"use strict";var s=a("73cc"),n=a.n(s);n.a}}]);
//# sourceMappingURL=chunk-90216f7e.602ec6a9.js.map